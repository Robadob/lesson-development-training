---
title: The Carpentries Workbench
teaching: 60
exercises: 15
---

::::::::::::::::::::::::::::::::::::::: objectives

- Identify the key tools used in The Carpentries lesson infrastructure.
- Complete the fundamental setup steps for a new lesson repository.
- Edit Markdown files using the GitHub web interface.

::::::::::::::::::::::::::::::::::::::::::::::::::

:::::::::::::::::::::::::::::::::::::::: questions

- How is a lesson site set up and published with GitHub?
- What are the essential configuration steps for a new lesson?
- How do you create and modify the pages in a lesson?

::::::::::::::::::::::::::::::::::::::::::::::::::

At this stage in the training, 
you should have a clear idea of who the people are that you want to teach this lesson to,
and what exactly the skills are that you want them to learn while they are following it.
It is time to begin creating a lesson website that will present that lesson to the world!

## GitHub Pages

The source of all The Carpentries lessons is made publicly-available in repositories on [GitHub].
GitHub provides a hosting service to open source projects such as these,
allowing users to present their projects to the wider world,
including a complete history of the changes made between versions of the individual files in the project,
and features to facilitate collaboration on projects.
We will learn more about some of those collaborative features later in this training.
For now, we will focus on one other important feature that GitHub provides: website hosting.

Via a system called **GitHub Pages**, users can build and host websites 
from relatively simple text files present in any repository on GitHub.
For many years, this has been how The Carpentries lesson websites have been presented to the world.
Our lesson sites used to be generated by software called _[Jekyll]_, 
a tool which is built into GitHub Pages that allows the webpage content, written in the text files of the repository, to be combined with descriptions of settings, structure, styling to create a relatively complex website.

## Using The Carpentries Workbench

In 2022, we adopted a new infrastructure for our lesson sites: **The Carpentries Workbench**.
Lesson sites built on the Workbench are still hosted with GitHub Pages,
but forego Jekyll in favour of a programming language, _[R]_, and _[pandoc]_, 
a software designed for converting content between file formats.
The Workbench combines three R packages:

- `{sandpaper}`: 
   converts a collection of Markdown or RMarkdown files into
   the structure of a lesson website.
- `{varnish}`: provides the files and folders that add 
   styling and additional functionality to a lesson website.
- `{pegboard}`: an programmatic interface to the lesson, 
   enabling various automated validation tasks.

For lesson developers, the Workbench makes The Carpentries lesson repositories
much simpler to navigate and work with.
We will use it now to initialise a new lesson.

### Creating a Lesson Repository

To get started, we first need to create a new repository for your lesson.
We will use a template to do this, 
so that the new repository contains the basic files and folders
that the Workbench needs in order to build a lesson site.
There are currently two templates to choose between:

1. [An RMarkdown template][rmd-template], best suited to lessons that will include a lot of R source code.
2. [A Markdown template][md-template], which is the simpler choice for all other lessons.

**One member of each participating lesson team** should choose one of these templates, 
following the link above and completing the configuration as follows:

* add a name for the repository
  * The name should be descriptive but fairly brief,
    with hyphens (`-`) to separate words
* in the "Description" field, write the title of your lesson
* choose "Public" visibility
* leave "Include all branches" **unchecked**

After pressing the "Create repository using this template" button,
you should be presented with a brand new lesson repository.

TODO insert screenshot of repository structure here

### Configuring a Lesson Repository

The repository contains a number of files and folders.
Most of these are source files for the content of your new lesson,
but a few are accompanying files primarily intended for the repository itself
rather than the lesson website.
These are:

- `CODE_OF_CONDUCT.md`
- `CONTRIBUTING.md`
- `LICENSE.md`
- `README.md`
- `.gitignore`
- and the `.github/` folder.

We will explore the repository extensively during the rest of the training.
For now, we can complete the initialisation of this new lesson repository by (TODO: expand on these points):

* adding collaborators
* annotating your repository with topics
* activating GitHub Pages to begin serving the lesson website (`gh-pages` branch)
  * copy URL and add to repository description

After following these steps, when you navigate to the pages URL, you should be see a lesson website with The Carpentries logo and "Lesson Title" in the top-left corner.

The lesson title can be adjusted by modifying the `config.yaml` file in the repository.
The `config.yaml` file contains several global parameters for a lesson -
to determine some of the page styling, contact details for the lesson, etc -
and is written in [YAML][yaml], a structured file format of key-pair values.
As well as the title of the lesson,
you can and should adjust some of the other values in `config.yaml`,
but you should not need to add new values or learn a lot about YAML 
to be able to configure your lesson.

::: challenge

Complete the configuration of your lesson by adjusting the following fields in `config.yaml`:

- `email`: add an email address people can contact with questions about the lesson/project.
- `created`: the date the lesson was created (today's date) in YYYY-MM-DD format.
- `keywords`: a (short) list of keywords for the lesson, 
   which can help people find your lesson when searching for resources online.
- `source`: change this to the URL for your lesson repository.

We will revisit the `life_cycle` and `carpentry` fields in `config.yaml` later in this training.

:::

::: challenge

The `README.md` file is the "front page" of your lesson repository on GitHub,
and is written in Markdown.
You should use it to provide basic information about the project,
for anyone who finds their way to the source files for your lesson.
Take a few minutes to update it with some basic information about the project:

- the lesson title
- a short description of the lesson
- a list of the names of the authors, optionally linked to their GitHub profile

:::


## Adding Lesson Content

Now that you have completed the basic configuration of your lesson site,
it is time to move on and look at where the actual lesson content will be written.

The "home page" of a lesson is created form the `index.md` file:
this file should contain a brief introduction to the lesson, 
designed to give visitors to the page a quick impression of the lesson
and whether or not it is appropriate for them.
The file begins with a short header, 
written in the same key-value pair syntax we encountered in `config.yaml`.
This header configures how the site will be built by `sandpaper`,
one of the components of The Carpentries Workbench,
and should be left untouched.
The page content begins after the blank line that follows this header.

To get started on this home page,
replace the template text with 
the same title and short description you added to your `README.md`.

Below those, you can add the prerequisite skills you determined earlier for your lesson,
as a bullet point list to `index.md`:

```markdown
* prerequisite 1
* prerequisite 2
* ...
```

::::::::::::::::::::::::::::::::::::::  challenge

## Exercise: practice editing Markdown in GitHub (5 minutes)

Add the objectives you defined for your lesson
as a bullet list in the `index.md` file of your lesson repository.


::::::::::::::::::::::::::::::::::::::::::::::::::

The main body of the lesson is written in _episodes_: 
the individual chunks or sections that the lesson is separated into.
The episode pages of the lesson site will be constructed from Markdown files
in the `episodes` folder of the lesson repository.

::: callout

### Why episodes?

TODO: add context and explanation for our use of "episodes" to describe chunks of a lesson.

:::

The `episodes` folder of your new repository should contain a single file,
`01-introduction.md`, which contains examples of how to write these Markdown files
for The Carpentries Workbench.

There are two important things to note right now:

1. Like `index.md`, the episode file begins with a short header. The fields in this header describe the episode title and the estimated time (in minutes) required to teach it and complete the exercises.
2. The example content includes several lines that start with strings of colons (`:::::::`). These are called _fenced blocks_, and are used to create various structured elements of the episode page. We will explore them in more detail later in the training.

- Creating a new episode
  - Add a title and define objectives for this episode

::::::::::::::::::::::::::::::::::::::  challenge

## Exercise: practice creating episodes (10 minutes)

Repeat the steps you just saw, to create another new episode file.
If you know what another episode in your lesson will be about,
create the page for that.
Otherwise, feel free to use any values you like for the file name, episode title, etc.


::::::::::::::::::::::::::::::::::::::::::::::::::



:::::::::::::::::::::::::::::::::::::::: keypoints

- First key point. Brief Answer to questions. (FIXME)

::::::::::::::::::::::::::::::::::::::::::::::::::


[GitHub]: https://github.com/
[Jekyll]: https://jekyllrb.com/
[md-template]: https://github.com/carpentries/workbench-template-md/generate
[pandoc]: https://pandoc.org/
[R]: https://www.r-project.org/
[rmd-template]: https://github.com/carpentries/workbench-template-rmd/generate
